# 서브태스크 기능

## 개요
하나의 Todo를 더 작은 단위로 쪼개어 관리할 수 있도록 서브태스크 기능을 추가한다. 큰 작업의 진행 상황을 시각적으로 파악하고, 세부 항목을 체계적으로 관리할 수 있게 한다.

## 화면 구성

### 기본 상태 — 서브태스크 접힘

```
┌─────────────────────────────────────────────────┐
│  [ ] 프로젝트 기획서 작성            2/4  ▶  ... │
│  [x] 장보기                                 ... │
│  [ ] 운동 루틴 정하기                1/3  ▶  ... │
└─────────────────────────────────────────────────┘
       (진행률)                            (메뉴)
```

### 서브태스크 펼침 (▶ 클릭 시)

```
┌─────────────────────────────────────────────────┐
│  [ ] 프로젝트 기획서 작성            2/4  ▼  ... │
│  │                                              │
│  │  ⠿  [x] 목차 정리                        🗑  │
│  │  ⠿  [x] 참고자료 수집                    🗑  │
│  │  ⠿  [ ] 초안 작성                        🗑  │
│  │  ⠿  [ ] 팀 리뷰 요청                     🗑  │
│  │                                              │
│  │  + 서브태스크 추가                            │
│  │                                              │
│  [x] 장보기                                 ... │
│  [ ] 운동 루틴 정하기                1/3  ▶  ... │
└─────────────────────────────────────────────────┘
  (드래그)                                  (삭제)
```

### 서브태스크 추가 중

```
┌─────────────────────────────────────────────────┐
│  [ ] 프로젝트 기획서 작성            2/4  ▼  ... │
│  │                                              │
│  │  ⠿  [x] 목차 정리                        🗑  │
│  │  ⠿  [x] 참고자료 수집                    🗑  │
│  │  ⠿  [ ] 초안 작성                        🗑  │
│  │  ⠿  [ ] 팀 리뷰 요청                     🗑  │
│  │                                              │
│  │  ┌─────────────────────────────┐              │
│  │  │ 서브태스크 제목 입력...      │  추가  취소  │
│  │  └─────────────────────────────┘              │
│  │                                              │
└─────────────────────────────────────────────────┘
```

### 부모 Todo 완료 시 (자동 완료)

```
  완료 전                          완료 후
┌──────────────────────┐    ┌──────────────────────┐
│ [ ] 기획서 작성  1/3 │    │ [x] 기획서 작성  3/3 │
│  │ [x] 목차 정리     │ -> │  │ [x] 목차 정리     │
│  │ [ ] 초안 작성     │    │  │ [x] 초안 작성     │
│  │ [ ] 팀 리뷰       │    │  │ [x] 팀 리뷰       │
└──────────────────────┘    └──────────────────────┘
```

### 서브태스크 없는 일반 Todo (추가 버튼 위치)

```
┌─────────────────────────────────────────────────┐
│  [ ] 장보기                                 ... │
│                                                 │
│       ... 메뉴 클릭 시:                         │
│                          ┌──────────────────┐   │
│                          │ + 서브태스크 추가 │   │
│                          │ ✏ 수정           │   │
│                          │ 🗑 삭제           │   │
│                          └──────────────────┘   │
└─────────────────────────────────────────────────┘
```

## 시나리오

### 1. 서브태스크 추가
[상황] 사용자가 기존 Todo 항목에서 서브태스크 추가 버튼을 클릭할 때
[동작] 시스템이 해당 Todo 하위에 새로운 서브태스크 입력 필드를 표시한다

성공 기준:
- [ ] 서브태스크 제목 입력 후 확인 -> 부모 Todo 아래에 서브태스크가 추가됨
- [ ] 서브태스크가 이미 있는 Todo에 추가 -> 기존 서브태스크 목록 끝에 새 항목 추가됨
- [ ] 서브태스크에 서브태스크 추가 시도 -> 추가 버튼이 표시되지 않음 (1단계만 허용)

### 2. 서브태스크 완료 처리
[상황] 사용자가 개별 서브태스크의 체크박스를 클릭할 때
[동작] 시스템이 해당 서브태스크를 완료 상태로 변경하고 부모 Todo의 진행률을 갱신한다

성공 기준:
- [ ] 서브태스크 5개 중 2개 완료 -> 부모 Todo에 "2/5" 진행률 표시
- [ ] 모든 서브태스크 완료 -> 부모 Todo에 "5/5" 진행률 표시
- [ ] 완료된 서브태스크 다시 클릭 -> 미완료로 되돌아가고 진행률 갱신

### 3. 부모 Todo 완료 처리
[상황] 사용자가 미완료 서브태스크가 있는 부모 Todo를 완료 처리할 때
[동작] 시스템이 부모 Todo와 함께 모든 미완료 서브태스크를 자동으로 완료 처리한다

성공 기준:
- [ ] 서브태스크 3개 중 1개만 완료된 부모 Todo 완료 -> 나머지 2개 서브태스크도 완료됨
- [ ] 부모 완료 후 진행률 -> "3/3" 표시

### 4. 서브태스크 순서 변경
[상황] 사용자가 서브태스크를 드래그하여 다른 위치로 이동할 때
[동작] 시스템이 서브태스크의 순서를 변경하고 새로운 순서를 유지한다

성공 기준:
- [ ] 3번째 서브태스크를 1번째로 드래그 -> 순서가 변경되어 저장됨
- [ ] 페이지 새로고침 후 -> 변경된 순서가 유지됨

### 5. 서브태스크 삭제
[상황] 사용자가 서브태스크를 삭제할 때
[동작] 시스템이 해당 서브태스크를 제거하고 진행률을 갱신한다

성공 기준:
- [ ] 서브태스크 5개 중 1개 삭제 -> 진행률이 "x/4"로 갱신됨
- [ ] 완료된 서브태스크 삭제 -> 완료 수와 전체 수 모두 반영하여 진행률 갱신

### 6. 부모 Todo 삭제
[상황] 사용자가 서브태스크를 가진 부모 Todo를 삭제할 때
[동작] 시스템이 부모 Todo와 모든 서브태스크를 함께 삭제한다

성공 기준:
- [ ] 서브태스크 3개를 가진 부모 Todo 삭제 -> 부모와 서브태스크 3개 모두 삭제됨
- [ ] 삭제 후 목록 -> 해당 부모 및 서브태스크가 표시되지 않음

## 전제 조건
- 기존 Todo CRUD 기능이 구현되어 있어야 함
- 서브태스크 깊이는 1단계로 제한 (서브태스크의 서브태스크 불가)
- 서브태스크 개수 제한 없음
- 서브태스크는 제목과 완료 상태만 가짐 (마감일, 우선순위 등 부가 속성 없음)
